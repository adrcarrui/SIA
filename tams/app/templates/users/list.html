{% extends "base.html" %}

{% block content %}
<div class="container py-3">
  <h4 class="mb-3">Users</h4>

  <form method="get">
    <table class="table table-sm table-striped align-middle">
      <thead>
        <!-- Cabecera normal -->
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>First name</th>
          <th>Last name</th>
          <th>Role</th>
          <th>Department</th>
          <th>Actions</th>
        </tr>

        <!-- Fila de filtros -->
        <tr>
          <th>
            <!-- si quieres filtrar por ID, opcional -->
            <input
              type="text"
              class="form-control form-control-sm"
              name="id"
              placeholder="ID"
              disabled
            >
          </th>

          <th>
            <input
              type="text"
              class="form-control form-control-sm"
              name="username"
              placeholder="Username"
              value="{{ username }}"
            >
          </th>

          <th>
            <input
              type="text"
              class="form-control form-control-sm"
              name="first_name"
              placeholder="First name"
              value="{{ first_name }}"
            >
          </th>

          <th>
            <input
              type="text"
              class="form-control form-control-sm"
              name="last_name"
              placeholder="Last name"
              value="{{ last_name }}"
            >
          </th>

          <th>
            <select
              name="role"
              class="form-select form-select-sm"
            >
              <option value="">All</option>
              <option value="admin"      {% if role == 'admin' %}selected{% endif %}>Admin</option>
              <option value="supervisor" {% if role == 'supervisor' %}selected{% endif %}>Supervisor</option>
              <option value="employee"   {% if role == 'employee' %}selected{% endif %}>Employee</option>
            </select>
          </th>

          <th>
            <input
              type="text"
              class="form-control form-control-sm"
              name="department"
              placeholder="Department"
              value="{{ department }}"
            >
          </th>

          <th class="text-nowrap">
            <button type="submit" class="btn btn-primary btn-sm">Filter</button>
            <a href="{{ url_for('users.users_list') }}" class="btn btn-secondary btn-sm">Clear</a>
          </th>
        </tr>
      </thead>

      <tbody>
        {% for u in users %}
        <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.username }}</td>
          <td>{{ u.first_name }}</td>
          <td>{{ u.last_name }}</td>
          <td>{{ u.role }}</td>
          <td>{{ u.department }}</td>
          <td>
            <!-- tus botones de acciones -->
            <a href="{{ url_for('users.edit_user', user_id=u.id) }}" class="btn btn-sm btn-outline-secondary">Edit</a>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="7" class="text-center text-muted">No users found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </form>
</div>
{% endblock %}
