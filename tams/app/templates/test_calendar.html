{% extends "base.html" %}

{% block content %}
<div class="container py-3">
  <h2 class="mb-3">Test FullCalendar</h2>

  <!-- Le pongo estilo visible para que sepas si el div existe aunque no pinte nada -->
  <div id="calendar" style="border:2px solid red; min-height:300px;"></div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      console.log("‚úÖ DOMContentLoaded en test-calendar");

      const calendarEl = document.getElementById('calendar');
      console.log("calendarEl:", calendarEl);

      console.log("window.FullCalendar:", window.FullCalendar);

      if (!window.FullCalendar) {
        console.error("‚ùå FullCalendar NO est√° definido.");
        return;
      }

      console.log("Calendar constructor:", FullCalendar.Calendar);

      try {
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          locale: 'en',
          firstDay: 1,
          height: 'auto',
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
          },
          events: [
            { title: 'Evento de prueba', start: '2025-11-28' }
          ]
        });

        calendar.render();
        console.log("‚úÖ calendar.render() ejecutado");
      } catch (e) {
        console.error("üí• Error creando el calendario:", e);
      }
    });
  </script>
{% endblock %}
