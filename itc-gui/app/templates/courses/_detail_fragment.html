<div>
  <h5 class="mb-2">{{ course.name }} <span class="text-muted">(#{{ course.id }})</span></h5>

  <p class="small text-muted mb-3">
    {% if course.start_date %}{{ course.start_date }}{% else %}–{% endif %}
    →
    {% if course.end_date %}{{ course.end_date }}{% else %}–{% endif %}
  </p>

  {% if course.description %}
    <p>{{ course.description }}</p>
  {% endif %}

  <hr>

  <h6 class="mb-2">Devices asignados (activos)</h6>

  <div class="table-responsive">
    <table class="table table-sm align-middle mb-0">
      <thead>
        <tr>
          <th>Assignment</th>
          <th>Device</th>
          <th>UID</th>
          <th>Status</th>
          <th>Assigned at</th>
        </tr>
      </thead>
      <tbody>
        {% for a in active_assignments %}
        <tr>
          <td>#{{ a.id }}</td>
          <td>{{ a.device.name if a.device else "Device #" ~ a.device_id }}</td>
          <td>
            {% if a.device and a.device.uid %}
              <code>{{ a.device.uid }}</code>
            {% else %}
              <span class="text-muted">–</span>
            {% endif %}
          </td>
          <td>{{ a.status }}</td>
          <td>
            {% if a.assigned_at %}
              {{ a.assigned_at.strftime("%Y-%m-%d %H:%M") }}
            {% else %}
              –
            {% endif %}
          </td>
        </tr>
        {% endfor %}
        {% if not active_assignments %}
        <tr>
          <td colspan="5" class="text-center text-muted">
            No hay devices asignados activos a este curso.
          </td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>
